#include "decode.nh"
#include "inst_format.nh"

module instruction_decode
{
    wire opcode[7];
    op_imm_t wire op_imm;

    func decode
    {
        opcode = instruction[6:0];

        any
        {
            opcode == OP_IMM:
            {
                op_imm = instruction;
                reg_imm(op_imm.rd, op_imm.funct3, op_imm.rs1, 32#op_imm.imm);
            }
            else :
            {
                error();
            }
        }
    }
}
